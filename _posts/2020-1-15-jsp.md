---
layout: post
title: jsp入门
categories: Web
tags : Web
author: 彭浩
---

# jsp基础

## jsp作用

（1）Servlet：

* 缺点：不适合设置html响应体
* 优点：动态资源，可以编程

（2）html：

* 缺点：html是静态页面，不能包含动态信息
* 优点：不用为输出html标签而发愁

（3）Jsp

* 优点：在原有html基础上添加java脚本，构成jsp页面

## jsp和servlet分工

（1）jsp：

* 作为请求发起页面，例如显示表单、超链接
* 作为结果显示页面，例如显示数据

（2）servlet：

* 作为请求中处理数据

## jsp9大内置对象

（1）request

（2）out对象

（3）session

（4）application

（5）response

（6）pageContext

（7）config

（8）page

（9）exception

## jsp的3种java脚本

（1）<%...%>，java代码片段常用，用于定义0~N条Java语句

（2）<%=...%>，java表达式，用于输出（常用）一条表达式（或变量）的结果

（3）<%!...%>，声明，用来创建类的成员变量和成员方法（基本不用）

## jsp的原理

（1）jsp是一种特殊的Servlet，当jsp页面被第一次访问时，服务器会把jsp编译成java文件（实际上是一个Servlet类），随后编译成.class，然后创建该类对象，最后调用它的service方法，第二次调用时，直接调用service方法。

（2）在tomcat的work目录下可以找到jsp对应的.java源码

# cookie入门

## HTTP协议与cookie

（1）由服务器创建保存到客户端浏览器的一个键值对，服务器保存Cookie的响应头：Set-Cookie: aaa=AAA。用java操作就是response.addHeader("Set-Cookie", "aaa=AAA");

（2）当浏览器请求服务器时，会把该服务器保存的cookie随请求发送给服务器，浏览器归还cookie的请求头

（3）HTTP规定（保证不给浏览器太大压力，但浏览器会违反）：

* 1个Cookie最大4kb
* 1个服务器最多向一个浏览器保存20个Cookie
* 1个浏览器最多可以保存300个Cookie

## Cookie用图（Cookie不能跨浏览器）

（1）服务器使用Cookie来跟踪客户端的状态

（2）保存购物车（购物车中的商品不能用request保存，因为它是一个用户向服务器发送的多个请求信息）

（3）显示上交登陆名（一用户多请求）

## JavaWeb中使用Cookie

（1）原始方式：

* 使用response发送Set-Cookie响应头
* 使用request获取Cookie请求头

（2）便捷方式

* 使用response.addCookie()方法向浏览器保存Cookie
* 使用request.getCookies()方法获取浏览器归还的Cookie

## Cookie详解

（1）Cookie不只是只有name和value两个属性

（2）Cookie的maxAge：Cookie的最大可保存时长，以秒为单位，例如cookie.setMaxAge(60)表示这个cookie会被浏览器保存到硬盘60s

* maxAge > 0，浏览器会将cookie保存到客户机的硬盘上，有效时长由maxAge指定
* maxAge < 0，cookie只在浏览器内存中存在，当用户关闭浏览器时，浏览器进程结束，cookie也就没有了
* maxAge = 0，浏览器会马上删除这个cookie

（3）Cookie的path：cookie的path并不是设置这个cookie在客户端保存的路径，该值由服务器创建创建cookie时设置，当浏览器访问服务器